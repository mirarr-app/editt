# Maintainer: mirrar-app <iknowarch@proton.me>
pkgname=editt-bin
pkgver=0.0.1
pkgrel=1
pkgdesc="A Flutter-based image view and editor app for linux"
arch=('x86_64')
url="https://github.com/editt-app/editt"
license=('MIT')
depends=('gtk3')
provides=('editt')
conflicts=('editt')

source=("$pkgname-$pkgver.zip::https://github.com/editt-app/editt/releases/download/$pkgver/editt.zip")
sha256sums=('SKIP')

package() {
  install -dm755 "$pkgdir/opt/editt"
  cp -r "$srcdir"/* "$pkgdir/opt/editt/"

  # Create executable
  install -dm755 "$pkgdir/usr/bin"
  cat >"$pkgdir/usr/bin/editt" <<EOF
#!/bin/sh
exec /opt/editt/editt "\$@"
EOF
  chmod +x "$pkgdir/usr/bin/editt"

  # Desktop file
  install -Dm644 /dev/stdin "$pkgdir/usr/share/applications/editt.desktop" <<EOF
[Desktop Entry]
Name=Editt
Comment=Photo editing and viewing app
Exec=editt
Icon=/opt/editt/data/flutter_assets/assets/images/image.png
Terminal=false
Type=Application
Categories=Utility;
EOF
}
